<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Python H5 è§£è°œæ¸¸æˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.10.5/brython.min.js"></script>
    <style>
        canvas { border: 2px solid black; }
    </style>
</head>
<body onload="brython()">
    <h1>è¿·å®«è§£è°œæ¸¸æˆ</h1>
    <p>ä½¿ç”¨é”®ç›˜ â†‘ â†“ â† â†’ ç§»åŠ¨åˆ°å‡ºå£ "E"</p>
    <canvas id="gameCanvas" width="300" height="300"></canvas>

    <script type="text/python">
        from browser import document, window
        import random

        # è¿·å®«åœ°å›¾ï¼ˆ5x5ï¼‰
        maze = [
            ["P", ".", ".", "X", "."],
            ["X", "X", ".", "X", "."],
            [".", ".", ".", ".", "."],
            ["X", "X", "X", "X", "."],
            ["X", "X", ".", ".", "E"]
        ]

        # ç©å®¶ä½ç½®
        player_x, player_y = 0, 0

        # ç”»å¸ƒ
        canvas = document["gameCanvas"]
        ctx = canvas.getContext("2d")
        cell_size = 60  # æ¯ä¸ªæ ¼å­çš„å¤§å°

        def draw_maze():
            """ ç»˜åˆ¶è¿·å®« """
            ctx.clearRect(0, 0, canvas.width, canvas.height)
            for y in range(5):
                for x in range(5):
                    if maze[y][x] == "X":
                        ctx.fillStyle = "black"
                    elif maze[y][x] == "E":
                        ctx.fillStyle = "green"
                    elif x == player_x and y == player_y:
                        ctx.fillStyle = "blue"
                    else:
                        ctx.fillStyle = "white"

                    ctx.fillRect(x * cell_size, y * cell_size, cell_size, cell_size)
                    ctx.strokeRect(x * cell_size, y * cell_size, cell_size, cell_size)

        def move_player(event):
            """ ç›‘å¬é”®ç›˜äº‹ä»¶ """
            global player_x, player_y

            key = event.key
            new_x, new_y = player_x, player_y

            if key == "ArrowUp": new_y -= 1
            elif key == "ArrowDown": new_y += 1
            elif key == "ArrowLeft": new_x -= 1
            elif key == "ArrowRight": new_x += 1

            # æ£€æŸ¥æ˜¯å¦è¶…å‡ºè¾¹ç•Œæˆ–æ’å¢™
            if 0 <= new_x < 5 and 0 <= new_y < 5 and maze[new_y][new_x] != "X":
                player_x, player_y = new_x, new_y

            # æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹
            if maze[player_y][player_x] == "E":
                window.alert("ğŸ‰ æ­å–œï¼ä½ æˆåŠŸè§£å¼€è¿·å®«ï¼")

            draw_maze()

        # ç»‘å®šäº‹ä»¶ç›‘å¬
        window.bind("keydown", move_player)

        # åˆæ¬¡ç»˜åˆ¶è¿·å®«
        draw_maze()
    </script>
</body>
</html>
